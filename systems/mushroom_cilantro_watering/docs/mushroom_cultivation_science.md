# 🍄 วิทยาศาสตร์การเพาะปลูกเห็ดนางฟ้า

> **เอกสารเชิงลึกด้านชีววิทยาและเทคโนโลยีการปลูกเห็ดนางฟ้า**  
> **จัดทำโดย: RDTRC Team**

---

## 📖 สารบัญ

1. [🧬 ชีววิทยาของเห็ดนางฟ้า](#biology)
2. [🌱 วงจรชีวิตและการเจริญเติบโต](#lifecycle)
3. [🌡️ ปัจจัยสิ่งแวดล้อม](#environment)
4. [🔬 กระบวนการทางชีวเคมี](#biochemistry)
5. [🦠 การจัดการเชื้อโรค](#disease-management)
6. [🌾 วัสดุเพาะและสารอาหาร](#substrate-nutrition)
7. [⚗️ เทคโนโลยีการควบคุม](#control-technology)
8. [📊 การวัดและประเมินผล](#measurement-evaluation)

---

## 🧬 ชีววิทยาของเห็ดนางฟ้า {#biology}

### 🏗️ โครงสร้างทางกายวิภาค

**เห็ดนางฟ้า (Pleurotus ostreatus)** เป็นเชื้อราที่มีโครงสร้างซับซ้อน:

```
โครงสร้างเห็ดนางฟ้า:
├── Fruiting Body (ดอกเห็ด)
│   ├── Cap (หมวกเห็ด) - มี Spores
│   ├── Gills (ใบเห็ด) - ผลิต Spores  
│   ├── Stem (ก้านเห็ด) - โครงสร้างรองรับ
│   └── Base (โคนเห็ด) - ติดกับ Substrate
├── Mycelium (ใยเชื้อรา)
│   ├── Primary Mycelium - จาก Spore เดี่ยว
│   ├── Secondary Mycelium - จากการผสม
│   └── Tertiary Mycelium - สร้าง Fruiting body
└── Substrate (วัสดุเพาะ)
    ├── Organic matter - แหล่งคาร์บอน
    ├── Nitrogen source - สร้างโปรตีน
    └── Minerals - ธาตุอาหารเสริม
```

### 🔬 โครงสร้างระดับเซลล์

**เซลล์เชื้อรา (Fungal Cell):**

```
Cell Wall Composition:
├── Chitin (20-30%) - โครงสร้างหลัก
├── β-Glucans (30-60%) - ความแข็งแรง
├── Proteins (10-25%) - เอนไซม์และโครงสร้าง
├── Lipids (2-8%) - เยื่อหุ้มเซลล์
└── Minerals (2-14%) - ธาตุอาหาร

Chemical Formula of Chitin:
(C₈H₁₃NO₅)ₙ - Polymer of N-acetylglucosamine
```

**ความแตกต่างจากพืช:**
- ไม่มี Chlorophyll → ไม่สังเคราะห์แสง
- ไม่มี Cellulose → ใช้ Chitin แทน
- เป็น Heterotroph → ต้องได้รับอาหารจากภายนอก
- มี Ergosterol → แทน Cholesterol ในสัตว์

### 🧪 การจำแนกประเภททางอนุกรมวิธาน

```
Kingdom: Fungi (เชื้อรา)
├── Phylum: Basidiomycota (เชื้อราที่มี Basidium)
    ├── Class: Agaricomycetes (เห็ดที่มี Gills)
        ├── Order: Agaricales (เห็ดทั่วไป)
            ├── Family: Pleurotaceae (ตระกูลเห็ดนางฟ้า)
                └── Genus: Pleurotus (เห็ดนางฟ้า)
                    ├── P. ostreatus (เห็ดนางฟ้าธรรมดา)
                    ├── P. eryngii (เห็ดนางรม)
                    ├── P. sajor-caju (เห็ดนางฟ้าป่า)
                    └── P. citrinopileatus (เห็ดนางฟ้าเหลือง)
```

---

## 🌱 วงจรชีวิตและการเจริญเติบโต {#lifecycle}

### 🔄 วงจรชีวิตสมบูรณ์

**Sexual Reproduction Cycle:**

```
Phase 1: Spore Germination (การงอกของสปอร์)
Spore → Germ tube → Primary mycelium (n)
Time: 12-24 hours
Conditions: Moisture 90%+, Temperature 25-28°C

Phase 2: Plasmogamy (การรวมตัวของ Cytoplasm)
Primary mycelium (n) + Primary mycelium (n) → Secondary mycelium (n+n)
Time: 2-7 days
Process: Anastomosis (การเชื่อมต่อของใยเชื้อรา)

Phase 3: Vegetative Growth (การเจริญเติบโตของใยเชื้อรา)
Secondary mycelium colonizes substrate
Time: 7-21 days (depends on substrate and conditions)
Rate: 2-5 mm/day linear growth

Phase 4: Karyogamy & Meiosis (การรวมและแบ่งนิวเคลียส)
Formation of Basidium → Nuclear fusion → Meiosis → 4 Basidiospores
Location: In the gills of fruiting body

Phase 5: Fruiting (การออกผล)
Environmental trigger → Primordium formation → Fruit body development
Time: 7-14 days from pinning to harvest
```

### 🌡️ ปัจจัยที่ควบคุมวงจรชีวิต

**1. Temperature Control:**

*Mycelial Growth Phase:*
```
Optimal: 25-28°C
├── < 20°C: Slow growth (50% reduction)
├── 20-25°C: Good growth
├── 25-28°C: Optimal growth rate
├── 28-32°C: Fast but weak mycelium
└── > 32°C: Growth cessation, possible death
```

*Fruiting Phase:*
```
Optimal: 15-20°C
├── < 10°C: No fruiting
├── 10-15°C: Slow fruiting, good quality
├── 15-20°C: Optimal fruiting
├── 20-25°C: Fast fruiting, lower quality
└── > 25°C: Poor fruiting, high contamination risk
```

**2. Humidity Control:**

*Relative Humidity Requirements:*
```
Mycelial Growth: 70-80% RH
├── Prevents substrate drying
├── Maintains hyphal turgor pressure
└── Enables nutrient transport

Fruiting: 85-95% RH
├── Prevents fruit body desiccation
├── Maintains proper gill formation
├── Enables spore release
└── Critical for pin formation
```

**3. Gas Exchange:**

*CO₂ Levels:*
```
Mycelial Growth Phase:
├── CO₂: 5,000-20,000 ppm (high tolerance)
├── O₂: > 16% (adequate for respiration)
└── Purpose: Vegetative growth

Fruiting Phase:
├── CO₂: < 1,000 ppm (trigger for fruiting)
├── O₂: > 18% (higher requirement)
└── Fresh air exchange: 4-8 volumes/hour
```

### 📊 Growth Rate Modeling

**Logistic Growth Model:**

```
dN/dt = rN(1 - N/K)

Where:
N = Mycelial biomass
t = Time
r = Intrinsic growth rate
K = Carrying capacity (maximum biomass)

Solution:
N(t) = K / (1 + ((K-N₀)/N₀) × e^(-rt))
```

**Practical Application:**
```cpp
class MushroomGrowthModel {
private:
  float K; // Carrying capacity
  float r; // Growth rate
  float N0; // Initial biomass
  
public:
  float predictBiomass(float time) {
    float ratio = (K - N0) / N0;
    return K / (1 + ratio * exp(-r * time));
  }
  
  float predictHarvestTime() {
    // When biomass reaches 90% of carrying capacity
    float targetRatio = 0.9;
    return log(9 * (K - N0) / N0) / r;
  }
};
```

---

## 🌡️ ปัจจัยสิ่งแวดล้อม {#environment}

### 💧 การจัดการความชื้น

**Water Activity (aᵨ) Concept:**

```
aᵨ = P/P₀

Where:
P = Vapor pressure of water in substrate
P₀ = Vapor pressure of pure water at same temperature

Optimal ranges:
├── Mycelial growth: aᵨ = 0.95-0.98
├── Fruiting: aᵨ = 0.98-0.99
└── Storage: aᵨ = 0.85-0.90
```

**Moisture Content vs Water Activity:**

```
Substrate Moisture Content:
├── Fresh substrate: 60-65% (wet basis)
├── After sterilization: 55-60%
├── During colonization: 50-55%
└── At fruiting: 45-50%

Water Activity Relationship:
MC = f(aᵨ, substrate composition, temperature)
```

**Humidity Control Strategies:**

*1. Passive Humidification:*
```
Wet towel method:
├── Surface area: A (m²)
├── Evaporation rate: E = k × A × (Psat - P)
├── k = mass transfer coefficient
└── Humidity increase ∝ E
```

*2. Active Humidification (Misting):*
```
Droplet size distribution:
├── Ultrasonic: 1-5 μm (fog)
├── Pressure nozzle: 10-100 μm (mist)
├── Air atomizing: 20-200 μm (spray)
└── Optimal for mushrooms: 10-50 μm
```

### 🌬️ การระบายอากาศ

**Ventilation Design Principles:**

*Air Changes per Hour (ACH):*
```
ACH = (Q × 60) / V

Where:
Q = Airflow rate (m³/min)
V = Room volume (m³)

Recommended ACH:
├── Incubation: 0.5-1 ACH
├── Fruiting: 4-8 ACH
└── Post-harvest: 2-4 ACH
```

*CO₂ Removal Calculation:*
```
CO₂ production rate by mushrooms:
Rco2 = 0.5-2.0 mg CO₂/g dry weight/hour

Required ventilation:
Q = (Rco2 × Biomass) / (Cin - Cout)

Where:
Cin = Inlet CO₂ concentration (400 ppm)
Cout = Target CO₂ concentration (800-1000 ppm)
```

### ☀️ การควบคุมแสง

**Light Requirements for Fruiting:**

*Photomorphogenesis:*
```
Light-induced responses:
├── Photoreceptors: Blue light (400-500 nm)
├── Signal transduction: cAMP pathway
├── Gene expression: Fruiting genes activation
└── Morphological changes: Stipe elongation, cap formation
```

*Optimal Light Parameters:*
```
Intensity: 200-1000 Lux (2-10 μmol/m²/s PPFD)
Duration: 12 hours light / 12 hours dark
Spectrum: Blue-dominant (peak at 450 nm)
Photoperiod: Consistent daily cycle

Light penetration in growing medium:
I(z) = I₀ × e^(-kz)
Where k = extinction coefficient
```

**LED Lighting Design:**

*Spectral Power Distribution:*
```
Optimal spectrum for Pleurotus:
├── Blue (400-500 nm): 60-70%
├── Green (500-600 nm): 10-20%
├── Red (600-700 nm): 20-30%
└── UV-A (350-400 nm): 0-5%
```

---

## 🔬 กระบวนการทางชีวเคมี {#biochemistry}

### 🍃 การหายใจและเมแทบอลิซึม

**Cellular Respiration:**

*Aerobic Respiration:*
```
C₆H₁₂O₆ + 6O₂ → 6CO₂ + 6H₂O + 38 ATP

Breakdown:
├── Glycolysis: Glucose → 2 Pyruvate (2 ATP)
├── Citric Acid Cycle: Pyruvate → CO₂ (2 ATP)
└── Electron Transport: O₂ → H₂O (34 ATP)
```

*Respiratory Quotient (RQ):*
```
RQ = CO₂ produced / O₂ consumed

For mushrooms:
├── Carbohydrate metabolism: RQ = 1.0
├── Fat metabolism: RQ = 0.7
├── Protein metabolism: RQ = 0.8
└── Mixed metabolism: RQ = 0.85-0.95
```

**Enzyme Systems:**

*Ligninolytic Enzymes:*
```
Pleurotus produces:
├── Laccase (EC 1.10.3.2)
│   ├── Function: Lignin degradation
│   ├── Cofactor: Cu²⁺
│   └── pH optimum: 3.5-5.0
├── Manganese Peroxidase (EC 1.11.1.13)
│   ├── Function: Lignin breakdown
│   ├── Cofactor: Mn²⁺, H₂O₂
│   └── pH optimum: 4.0-5.0
└── Versatile Peroxidase (EC 1.11.1.16)
    ├── Function: Broad substrate range
    ├── Cofactor: Mn²⁺, H₂O₂
    └── pH optimum: 3.0-4.0
```

### 🧬 การสังเคราะห์สารประกอบ

**Protein Synthesis:**

*Essential Amino Acids in Pleurotus:*
```
Amino Acid Profile (% of total protein):
├── Leucine: 8.2%
├── Lysine: 6.8%
├── Valine: 6.1%
├── Phenylalanine: 4.9%
├── Isoleucine: 4.6%
├── Threonine: 4.4%
├── Histidine: 2.8%
├── Methionine: 2.1%
└── Tryptophan: 1.3%

Total protein content: 15-25% dry weight
```

**Carbohydrate Metabolism:**

*Polysaccharide Composition:*
```
Cell Wall Polysaccharides:
├── β-Glucans (1→3, 1→6 linkages)
│   ├── Function: Structural, immunomodulatory
│   ├── Content: 20-30% dry weight
│   └── Solubility: Water-soluble fraction
├── Chitin (1→4 linked N-acetylglucosamine)
│   ├── Function: Structural integrity
│   ├── Content: 5-15% dry weight
│   └── Location: Hyphal walls, fruit body
└── Mannan (1→4, 1→6 linked mannose)
    ├── Function: Cell wall component
    ├── Content: 2-8% dry weight
    └── Association: With glucans
```

### 🔋 การผลิตพลังงาน

**ATP Production Pathways:**

*Substrate-Level Phosphorylation:*
```
Glucose → Pyruvate: 2 ATP
Pyruvate → Acetyl-CoA: 0 ATP (but NADH)
Citric Acid Cycle: 2 ATP + 6 NADH + 2 FADH₂
```

*Oxidative Phosphorylation:*
```
NADH → 3 ATP (via Complex I)
FADH₂ → 2 ATP (via Complex II)
Total from glucose: 38 ATP

Energy yield: 686 kcal/mol glucose
ATP efficiency: ~38% (rest as heat)
```

**Metabolic Rate Measurement:**

*Respirometry:*
```cpp
class MushroomRespirometer {
private:
  float O2_consumed; // mL/g/hour
  float CO2_produced; // mL/g/hour
  
public:
  float calculateRQ() {
    return CO2_produced / O2_consumed;
  }
  
  float calculateMetabolicRate() {
    // Using oxycalorific equivalent
    float energy_kJ = O2_consumed * 20.1; // kJ/L O2
    return energy_kJ; // kJ/g/hour
  }
};
```

---

## 🦠 การจัดการเชื้อโรค {#disease-management}

### 🔬 เชื้อโรคที่สำคัญ

**1. Bacterial Diseases:**

*Pseudomonas tolaasii (Brown Blotch):*
```
Pathogen characteristics:
├── Gram-negative bacterium
├── Optimal growth: 25-30°C, pH 6-8
├── Produces toxin: Tolaasin
└── Transmission: Water, air, insects

Symptoms:
├── Brown spots on cap surface
├── Pitted lesions on stem
├── Reduced shelf life
└── Off-odor development

Control measures:
├── Reduce humidity to < 85%
├── Improve air circulation
├── Use chlorinated water
└── Harvest before symptoms appear
```

**2. Fungal Diseases:**

*Trichoderma harzianum (Green Mold):*
```
Pathogen characteristics:
├── Fast-growing saprophyte
├── Produces green conidia
├── pH tolerance: 2-9
└── Temperature range: 15-35°C

Competition mechanisms:
├── Mycoparasitism: Direct attack on host
├── Antibiosis: Antibiotic production
├── Competition: Nutrient and space
└── Enzyme production: Cell wall degrading

Prevention:
├── Substrate sterilization: 121°C, 15-60 min
├── Aseptic technique during inoculation
├── Environmental control: T, RH, pH
└── Quality spawn selection
```

### 🛡️ การป้องกันแบบบูรณาการ

**Integrated Pest Management (IPM):**

*1. Cultural Control:*
```
Environmental management:
├── Temperature: Maintain species-specific ranges
├── Humidity: Avoid excess moisture
├── Ventilation: Ensure adequate air exchange
├── Sanitation: Regular cleaning and disinfection
└── Substrate quality: Proper C:N ratio, pH
```

*2. Biological Control:*
```
Beneficial microorganisms:
├── Bacillus subtilis: Antibiotic production
├── Streptomyces spp.: Antifungal compounds
├── Trichoderma atroviride: Mycoparasitism
└── Pseudomonas fluorescens: Siderophore production
```

*3. Chemical Control:*
```
Disinfectants and their mechanisms:
├── Sodium hypochlorite (NaClO)
│   ├── Concentration: 50-200 ppm active Cl
│   ├── Mechanism: Oxidation of cell components
│   ├── Contact time: 1-5 minutes
│   └── pH dependency: Most effective at pH 6.5-7.5
├── Hydrogen peroxide (H₂O₂)
│   ├── Concentration: 0.5-3%
│   ├── Mechanism: Lipid peroxidation
│   ├── Advantages: Leaves no residue
│   └── Stability: Decomposes to H₂O + O₂
└── Ozone (O₃)
    ├── Concentration: 0.1-1.0 ppm
    ├── Mechanism: Strong oxidation
    ├── Half-life: 20-30 minutes in air
    └── Residue: None (decomposes to O₂)
```

### 🔬 การตรวจสอบและวินิจฉัย

**Diagnostic Methods:**

*1. Visual Inspection:*
```
Contamination indicators:
├── Color changes: Green, black, orange patches
├── Texture changes: Slimy, soft, mushy areas
├── Odor: Off-smells, sour, ammonia-like
├── Growth patterns: Abnormal mycelium
└── Fruit body deformities: Malformed mushrooms
```

*2. Microscopic Examination:*
```cpp
class ContaminationAnalysis {
public:
  struct MicroscopicFeatures {
    float spore_size_um;
    String spore_shape;
    String mycelium_color;
    bool septate_hyphae;
    String reproductive_structures;
  };
  
  String identifyContaminant(MicroscopicFeatures features) {
    if (features.spore_size_um < 3 && features.spore_shape == "oval") {
      return "Yeast contamination";
    } else if (features.mycelium_color == "green" && features.septate_hyphae) {
      return "Trichoderma spp.";
    } else if (features.mycelium_color == "black" && !features.septate_hyphae) {
      return "Rhizopus spp.";
    }
    return "Unknown contamination";
  }
};
```

---

## 🌾 วัสดุเพาะและสารอาหาร {#substrate-nutrition}

### 🌾 ประเภทของวัสดุเพาะ

**1. Lignocellulosic Materials:**

*Composition Analysis:*
```
Rice Straw:
├── Cellulose: 32-47%
├── Hemicellulose: 19-27%
├── Lignin: 5-24%
├── Ash: 13-20%
├── Protein: 3-4%
└── C:N ratio: 50-80:1

Wheat Straw:
├── Cellulose: 33-40%
├── Hemicellulose: 20-25%
├── Lignin: 15-20%
├── Ash: 4-9%
├── Protein: 3-4%
└── C:N ratio: 80-150:1

Corn Cob:
├── Cellulose: 35-45%
├── Hemicellulose: 35-40%
├── Lignin: 15-20%
├── Ash: 1-3%
├── Protein: 2-3%
└── C:N ratio: 60-120:1
```

**2. Substrate Formulation:**

*Optimal C:N Ratio:*
```
C:N Ratio Calculation:
C:N = (% Carbon / % Nitrogen)

Optimal ranges:
├── Initial substrate: 25-30:1
├── After supplementation: 20-25:1
├── During colonization: 15-20:1
└── At fruiting: 10-15:1

Adjustment methods:
├── High C:N: Add nitrogen sources (bran, urea)
├── Low C:N: Add carbon sources (sawdust, paper)
└── Balanced: Maintain moisture and pH
```

### 🧪 การเตรียมวัสดุเพาะ

**Substrate Preparation Steps:**

*1. Physical Treatment:*
```
Size reduction:
├── Chopping: 2-5 cm pieces
├── Grinding: Increase surface area
├── Mixing: Homogeneous distribution
└── Screening: Remove fine particles

Moisture adjustment:
Target moisture: 60-65% (wet basis)
Water addition = (Target MC - Initial MC) × Dry weight / (100 - Target MC)
```

*2. Chemical Treatment:*
```
Lime treatment (Ca(OH)₂):
├── Dosage: 1-2% of dry substrate weight
├── Contact time: 12-24 hours
├── pH increase: 8.5-9.5
├── Benefits: Lignin breakdown, pathogen control
└── Neutralization: Rinse until pH 7-8

Urea supplementation:
├── Dosage: 0.5-1% of dry substrate weight
├── Function: Nitrogen source
├── Timing: During substrate preparation
└── Effect: Increased protein content
```

*3. Biological Treatment:*
```
Composting process:
Phase 1 (7-14 days):
├── Temperature: 40-65°C
├── Microorganisms: Thermophilic bacteria
├── Process: Cellulose breakdown
└── Turning: Every 2-3 days

Phase 2 (7-14 days):
├── Temperature: 45-50°C
├── Microorganisms: Actinomycetes, fungi
├── Process: Lignin modification
└── Moisture: Maintain 50-60%
```

### 🔥 การฆ่าเชื้อ

**Sterilization Methods:**

*1. Steam Sterilization:*
```
Autoclave parameters:
├── Temperature: 121°C (250°F)
├── Pressure: 15 psi (1.05 kg/cm²)
├── Time: 15-60 minutes (depending on volume)
├── Cooling: Natural cooling to 25-30°C
└── Sterility test: Incubate sample 48-72 hours

Heat penetration calculation:
Q = mcΔT
Where:
Q = Heat required (kJ)
m = Mass of substrate (kg)
c = Specific heat capacity (kJ/kg°C)
ΔT = Temperature difference (°C)
```

*2. Pasteurization:*
```
Hot water treatment:
├── Temperature: 65-80°C
├── Time: 60-90 minutes
├── Advantages: Energy efficient, selective
├── Disadvantages: May not kill all pathogens
└── Monitoring: Core temperature measurement

Steam pasteurization:
├── Temperature: 60-65°C
├── Time: 6-8 hours
├── Steam injection: Maintain moisture
└── Cooling: Gradual to prevent condensation
```

### 📊 คุณภาพวัสดุเพาะ

**Quality Assessment Parameters:**

*Physical Properties:*
```cpp
struct SubstrateQuality {
  float moisture_content;     // 60-65%
  float bulk_density;         // 200-400 kg/m³
  float porosity;            // 70-80%
  float water_holding_capacity; // 2-4 g water/g dry matter
  float pH;                  // 6.5-7.5
  float electrical_conductivity; // 1-3 mS/cm
};

bool assessSubstrateQuality(SubstrateQuality substrate) {
  bool quality_ok = true;
  
  if (substrate.moisture_content < 60 || substrate.moisture_content > 65) {
    Serial.println("Moisture content out of range");
    quality_ok = false;
  }
  
  if (substrate.pH < 6.5 || substrate.pH > 7.5) {
    Serial.println("pH out of optimal range");
    quality_ok = false;
  }
  
  return quality_ok;
}
```

---

## ⚗️ เทคโนโลยีการควบคุม {#control-technology}

### 🎛️ ระบบควบคุมอัตโนมัติ

**Process Control Strategy:**

*Cascade Control System:*
```
Primary Loop (Temperature Control):
├── Setpoint: 22°C (fruiting temperature)
├── Sensor: DHT22 temperature reading
├── Controller: PID algorithm
├── Output: Heater duty cycle (0-100%)
└── Disturbances: Ambient temperature changes

Secondary Loop (Humidity Control):
├── Setpoint: 90% RH
├── Sensor: DHT22 humidity reading
├── Controller: On/Off with hysteresis
├── Output: Misting system activation
└── Coupling: Affected by temperature loop
```

*Fuzzy Logic Control:*
```cpp
class FuzzyEnvironmentController {
private:
  // Membership functions for temperature
  float tempCold(float T) { return (T <= 18) ? 1 : (T >= 22) ? 0 : (22-T)/4; }
  float tempOptimal(float T) { return (T <= 18 || T >= 26) ? 0 : 
                               (T <= 20) ? (T-18)/2 : (T >= 24) ? (26-T)/2 : 1; }
  float tempHot(float T) { return (T <= 22) ? 0 : (T >= 26) ? 1 : (T-22)/4; }
  
  // Membership functions for humidity  
  float humLow(float H) { return (H <= 70) ? 1 : (H >= 85) ? 0 : (85-H)/15; }
  float humOptimal(float H) { return (H <= 70 || H >= 95) ? 0 :
                              (H <= 80) ? (H-70)/10 : (H >= 90) ? (95-H)/5 : 1; }
  float humHigh(float H) { return (H <= 85) ? 0 : (H >= 95) ? 1 : (H-85)/10; }

public:
  struct ControlOutput {
    int heater_power;    // 0-100%
    int misting_duration; // seconds
    int fan_speed;       // 0-100%
  };
  
  ControlOutput fuzzyControl(float temperature, float humidity) {
    ControlOutput output = {0, 0, 0};
    
    // Rule 1: If temp is cold AND humidity is low THEN heater high, misting long
    float rule1_strength = min(tempCold(temperature), humLow(humidity));
    output.heater_power = max(output.heater_power, (int)(rule1_strength * 100));
    output.misting_duration = max(output.misting_duration, (int)(rule1_strength * 30));
    
    // Rule 2: If temp is optimal AND humidity is optimal THEN maintain
    float rule2_strength = min(tempOptimal(temperature), humOptimal(humidity));
    output.heater_power = max(output.heater_power, (int)(rule2_strength * 50));
    output.misting_duration = max(output.misting_duration, (int)(rule2_strength * 10));
    
    // Rule 3: If temp is hot OR humidity is high THEN fan on
    float rule3_strength = max(tempHot(temperature), humHigh(humidity));
    output.fan_speed = max(output.fan_speed, (int)(rule3_strength * 80));
    
    return output;
  }
};
```

### 📊 การตรวจสอบและประเมินผล

**Data Acquisition System:**

*Multi-sensor Integration:*
```cpp
class MushroomMonitoringSystem {
private:
  struct SensorData {
    float temperature;
    float humidity; 
    float co2_ppm;
    float light_lux;
    unsigned long timestamp;
    bool valid;
  };
  
  SensorData sensorHistory[1440]; // 24 hours at 1-minute intervals
  int dataIndex = 0;
  
public:
  void logSensorData(float temp, float hum, float co2, float light) {
    SensorData data;
    data.temperature = temp;
    data.humidity = hum;
    data.co2_ppm = co2;
    data.light_lux = light;
    data.timestamp = millis();
    data.valid = validateSensorData(data);
    
    sensorHistory[dataIndex] = data;
    dataIndex = (dataIndex + 1) % 1440;
  }
  
  float calculateVPD(float temp, float rh) {
    // Vapor Pressure Deficit calculation
    float es = 0.6108 * exp(17.27 * temp / (temp + 237.3)); // kPa
    float ea = es * rh / 100; // kPa
    return es - ea; // VPD in kPa
  }
  
  bool validateSensorData(SensorData data) {
    return (data.temperature >= -10 && data.temperature <= 50) &&
           (data.humidity >= 0 && data.humidity <= 100) &&
           (data.co2_ppm >= 300 && data.co2_ppm <= 10000) &&
           (data.light_lux >= 0 && data.light_lux <= 10000);
  }
};
```

### 🔬 การวิเคราะห์ประสิทธิภาพ

**Key Performance Indicators (KPIs):**

*1. Biological Efficiency (BE):*
```
BE = (Fresh mushroom weight / Dry substrate weight) × 100%

Typical values:
├── Excellent: BE > 100%
├── Good: BE = 80-100%
├── Average: BE = 60-80%
├── Poor: BE < 60%
└── Factors: Strain, substrate, environment
```

*2. Productivity Rate:*
```
Productivity = Total yield (kg) / (Growing area (m²) × Time (days))

Units: kg/m²/day

Optimization factors:
├── Substrate density: 400-600 kg/m³
├── Shelf utilization: 80-90%
├── Crop cycles: 3-4 per year
└── Environmental control accuracy
```

*3. Energy Efficiency:*
```cpp
class EnergyEfficiencyAnalyzer {
private:
  float total_energy_consumed; // kWh
  float mushroom_yield; // kg
  
public:
  float calculateEnergyIntensity() {
    return total_energy_consumed / mushroom_yield; // kWh/kg
  }
  
  float calculateCostEffectiveness(float energy_cost_per_kWh, float mushroom_price_per_kg) {
    float energy_cost = total_energy_consumed * energy_cost_per_kWh;
    float revenue = mushroom_yield * mushroom_price_per_kg;
    return (revenue - energy_cost) / revenue * 100; // % profit margin
  }
};
```

---

## 📊 การวัดและประเมินผล {#measurement-evaluation}

### 🔬 การวิเคราะห์คุณภาพ

**Nutritional Analysis:**

*Proximate Composition:*
```
Standard Analysis Methods:
├── Moisture: AOAC 925.10 (Oven drying at 105°C)
├── Protein: AOAC 984.13 (Kjeldahl method, N × 6.25)
├── Fat: AOAC 991.36 (Soxhlet extraction)
├── Ash: AOAC 923.03 (Muffle furnace at 550°C)
├── Fiber: AOAC 978.10 (Enzymatic-gravimetric)
└── Carbohydrate: 100 - (Moisture + Protein + Fat + Ash)

Typical values for P. ostreatus:
├── Moisture: 85-92%
├── Protein: 1.6-2.5% (fresh), 15-25% (dry)
├── Fat: 0.2-0.8% (fresh), 2-8% (dry)
├── Ash: 0.8-1.2% (fresh), 8-12% (dry)
└── Carbohydrate: 4-6% (fresh), 50-65% (dry)
```

**Bioactive Compounds:**

*β-Glucan Content:*
```
Extraction and Quantification:
1. Hot water extraction (100°C, 2 hours)
2. Ethanol precipitation (3:1 v/v)
3. Enzymatic purification (α-amylase, protease)
4. Quantification: Phenol-sulfuric acid method

β-Glucan content: 15-25% of dry weight
Structure: (1→3)-β-D-glucan with (1→6) branches
Bioactivity: Immunomodulatory, antitumor
```

### 📈 การวิเคราะห์การเจริญเติบโต

**Growth Measurement Techniques:**

*1. Biomass Determination:*
```cpp
class BiomassAnalyzer {
public:
  struct GrowthData {
    float fresh_weight;     // g
    float dry_weight;       // g  
    float moisture_content; // %
    int day_of_growth;
    float growth_rate;      // g/day
  };
  
  float calculateSpecificGrowthRate(float biomass_initial, float biomass_final, float time_days) {
    return log(biomass_final / biomass_initial) / time_days; // day⁻¹
  }
  
  float calculateDoubling_time(float specific_growth_rate) {
    return log(2) / specific_growth_rate; // days
  }
  
  float predictYield(float current_biomass, float days_remaining, float growth_rate) {
    return current_biomass * exp(growth_rate * days_remaining);
  }
};
```

*2. Image Analysis:*
```
Computer Vision for Growth Monitoring:
├── Image capture: RGB camera, consistent lighting
├── Preprocessing: Noise reduction, contrast enhancement
├── Segmentation: Threshold-based or machine learning
├── Feature extraction: Area, perimeter, circularity
└── Growth tracking: Time-series analysis

Measurements:
├── Cap diameter: Major and minor axes
├── Stipe length: From base to cap junction
├── Cluster count: Number of individual mushrooms
└── Total area: Pixel count × calibration factor
```

### 🎯 การควบคุมคุณภาพ

**Quality Control Parameters:**

*Physical Quality:*
```
Visual inspection criteria:
├── Color: Uniform, species-typical
├── Texture: Firm, not slimy or dry
├── Shape: Well-formed cap and stipe
├── Size: Uniform within grade
├── Defects: < 5% surface blemishes
└── Foreign matter: None visible

Instrumental measurements:
├── Firmness: Texture analyzer (N/mm²)
├── Color: Colorimeter (L*a*b* values)
├── Moisture: NIR spectroscopy
└── Weight: Digital balance (±0.1g)
```

*Shelf Life Evaluation:*
```cpp
class ShelfLifePredictor {
private:
  float Q10_factor = 2.0; // Reaction rate doubles per 10°C
  
public:
  float predictShelfLife(float temperature, float reference_temp, float reference_shelf_life) {
    float temp_factor = pow(Q10_factor, (reference_temp - temperature) / 10.0);
    return reference_shelf_life * temp_factor;
  }
  
  struct StorageConditions {
    float temperature;      // °C
    float relative_humidity; // %
    String packaging;       // Modified atmosphere, vacuum, etc.
    float predicted_shelf_life; // days
  };
  
  StorageConditions optimizeStorage() {
    StorageConditions optimal;
    optimal.temperature = 2; // °C (refrigerated)
    optimal.relative_humidity = 95; // % (high humidity)
    optimal.packaging = "Perforated plastic";
    optimal.predicted_shelf_life = predictShelfLife(2, 20, 3); // ~12 days
    return optimal;
  }
};
```

---

## 🎓 สรุปและการประยุกต์

### 🔬 ความเข้าใจทางวิทยาศาสตร์

**หลักการสำคัญที่ต้องจำ:**

1. **ชีววิทยา:** เห็ดเป็นเชื้อรา ไม่ใช่พืช - ต้องการสภาพแวดล้อมและการดูแลที่แตกต่าง
2. **เคมี:** การควบคุม pH, ความชื้น และสารอาหารมีผลต่อการเจริญเติบโตโดยตรง
3. **ฟิสิกส์:** การถ่ายเทความร้อน การไหลของอากาศ และแสงมีบทบาทสำคัญ
4. **วิศวกรรม:** ระบบควบคุมอัตโนมัติช่วยให้การผลิตมีคุณภาพสม่ำเสมอ

### 🎯 การประยุกต์ใช้ในระบบอัตโนมัติ

**การออกแบบระบบที่มีประสิทธิภาพ:**

```cpp
class OptimalMushroomSystem {
public:
  void implementScientificPrinciples() {
    // 1. Temperature control based on growth phase
    if (growth_phase == MYCELIAL_GROWTH) {
      setTargetTemperature(26); // °C
    } else if (growth_phase == FRUITING) {
      setTargetTemperature(18); // °C
    }
    
    // 2. Humidity control with VPD consideration
    float vpd = calculateVPD(temperature, humidity);
    if (vpd > 0.8) { // kPa - too dry
      activateMisting(30); // seconds
    }
    
    // 3. CO2 management for fruiting trigger
    if (co2_ppm > 1000 && growth_phase == READY_TO_FRUIT) {
      activateVentilation(HIGH_SPEED);
      growth_phase = FRUITING;
    }
    
    // 4. Light control for morphogenesis
    if (growth_phase == FRUITING) {
      setLightIntensity(500); // Lux
      setPhotoperiod(12, 12); // 12h light, 12h dark
    }
  }
};
```

### 🌟 ข้อได้เปรียบของการใช้วิทยาศาสตร์

1. **ประสิทธิภาพสูง:** เข้าใจหลักการทำให้ควบคุมได้แม่นยำ
2. **ประหยัดต้นทุน:** ใช้ทรัพยากรอย่างเหมาะสม
3. **คุณภาพดี:** ผลผลิตมีคุณภาพสม่ำเสมอ
4. **แก้ปัญหาได้:** เมื่อเกิดปัญหารู้วิธีแก้ไข
5. **พัฒนาต่อได้:** สามารถปรับปรุงระบบให้ดีขึ้น

---

*🍄 การเข้าใจวิทยาศาสตร์เบื้องหลังการปลูกเห็ดจะทำให้เราสามารถออกแบบและใช้งานระบบอัตโนมัติได้อย่างมีประสิทธิภาพสูงสุด*